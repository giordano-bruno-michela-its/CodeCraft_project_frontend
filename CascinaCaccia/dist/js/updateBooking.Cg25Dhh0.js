import"./modulepreload-polyfill.B5Qt9EMX.js";import{h as t,i as r,j as c,f as d}from"./utils.DGbLEXry.js";function u(){return{startDate:document.getElementById("startDate").value,endDate:document.getElementById("endDate").value,name:document.getElementById("name").value,surname:document.getElementById("surname").value,email:document.getElementById("boking-form-email").value,association:document.getElementById("association").value,phoneNumber:document.getElementById("phoneNumber").value,nChildren:parseInt(document.getElementById("nChildren").value),nAdults:parseInt(document.getElementById("nAdults").value),additionalInfo:document.getElementById("additionalInfo").value}}function m(e){if(!e)return;const o=new Date(e.beginTime).toISOString().split("T")[0],i=new Date(e.endTime).toISOString().split("T")[0];t("startDate",o),t("endDate",i),t("name",e.name),t("surname",e.surname),t("boking-form-email",e.email),t("association",e.association),t("phoneNumber",e.phoneNumber),r("duration",e.bookingDuration.id),t("nChildren",e.participantsQuantity),t("nAdults",e.guidesQuantity),e.additionalInfo&&c("additionalInfo",e.additionalInfo),e.activityType?e.activityType.forEach(a=>{const n=document.querySelector(`input[name="activities"][value="${a.id}"]`);n?n.checked=!0:console.warn(`Checkbox non trovato per activity ID: ${a.id}`)}):console.warn("Nessuna attivitÃ  trovata in reservationDetails.activityType.")}document.addEventListener("DOMContentLoaded",()=>{const e=JSON.parse(localStorage.getItem("reservationDetails")||"{}");m(e);const o=document.getElementById("bookingForm");o.addEventListener("submit",async i=>{i.preventDefault();const a=u();try{const n=`http://localhost:8080/api/formreq/updatebooking/${e.id}`;if((await fetch(n,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)d("Richiesta inoltrata con successo!","success"),o.reset(),window.location.href="../../../index.html";else throw new Error("Errore durante l'aggiornamento della prenotazione")}catch(n){d("Problemi durante l'invio della richiesta, riprova tra poco!","error"),console.error(n)}})});
