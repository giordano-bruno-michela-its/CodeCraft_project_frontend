async function i(o){console.log(JSON.stringify(o));const t=await fetch("http://localhost:8080/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok){const s=await t.json();throw new Error(`Errore nella richiesta: ${t.status} - ${s.message||"Errore sconosciuto"}`)}const e=await t.json();return sessionStorage.setItem("authToken",e.accessToken),console.log(e.accessToken),window.location.href="../Pages/dashboard.html",e}async function c(o){console.log(o);const e=await(await fetch("http://localhost:8080/api/formreq/all",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}})).json();return console.log(e),e}async function l(o){console.log(JSON.stringify(o));const t=await fetch("http://localhost:8080/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok){const s=await t.json();throw new Error(`Errore nella richiesta: ${t.status} - ${s.message||"Errore sconosciuto"}`)}const e=await t.text();return window.location.href="../Pages/dashboard.html",e}async function h(o,t){console.log(JSON.stringify(o)),console.log(o.email);const e={id:1,noReplyEmail:o.email,noReplyPassword:"vwiwpzvtuypoinuo",adminEmail:o.email};console.log(JSON.stringify(e));const s=await fetch("http://localhost:8080/api/admin/updateMail",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)});if(!s.ok){const a=await s.json();throw new Error(`Errore nella richiesta: ${s.status} - ${a.message||"Errore sconosciuto"}`)}return await s.json()}async function d(o,t){console.log(JSON.stringify(o)),console.log(t);const e=await fetch(`http://localhost:8080/api/formreq/updatebooking/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(o)});if(!e.ok){const s=await e.json();throw new Error(`Errore nella richiesta: ${e.status} - ${s.message||"Errore sconosciuto"}`)}return e}async function p(){const o=await fetch("http://localhost:8080/api/auth/has-users");if(!o.ok){const e=await o.json();throw new Error(`Errore nella richiesta: ${o.status} - ${e.message||"Errore sconosciuto"}`)}return await o.json()}async function u(o){return console.log(o),await fetch("http://localhost:8080/api/admin",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}})}async function w(o){console.log(o);const t=await fetch("http://localhost:8080/api/emails/newsletter/file",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({format:"txt"})});if(console.log(t),!t.ok)throw new Error(`Errore durante il download: ${t.statusText}`);const e=await t.blob(),s=URL.createObjectURL(e),a=t.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1]||"newsletter.txt",n=document.createElement("a");return n.href=s,n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s),console.log("File scaricato con successo"),t}export{i as a,h as b,u as c,w as d,l as e,c as g,d as s,p as v};
