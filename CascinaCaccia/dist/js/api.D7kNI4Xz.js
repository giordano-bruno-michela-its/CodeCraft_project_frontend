async function i(o){console.log(JSON.stringify(o));const t=await fetch("http://localhost:8080/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok){const a=await t.json();throw new Error(`Errore nella richiesta: ${t.status} - ${a.message||"Errore sconosciuto"}`)}const e=await t.json();return sessionStorage.setItem("authToken",e.accessToken),window.location.href="../Pages/dashboard.html",e}async function c(o){return await(await fetch("http://localhost:8080/api/formreq/all",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}})).json()}async function l(o){console.log(JSON.stringify(o));const t=await fetch("http://localhost:8080/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok){const a=await t.json();throw new Error(`Errore nella richiesta: ${t.status} - ${a.message||"Errore sconosciuto"}`)}return await t.text()}async function h(o,t){const e={id:1,noReplyEmail:o.email,noReplyPassword:"vwiwpzvtuypoinuo",adminEmail:o.email},a=await fetch("http://localhost:8080/api/admin/updateMail",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)});if(!a.ok){const n=await a.json();throw new Error(`Errore nella richiesta: ${a.status} - ${n.message||"Errore sconosciuto"}`)}return await a.json()}async function p(o,t){const e=await fetch(`http://localhost:8080/api/formreq/updatebookingnomail/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(o)});if(!e.ok){const a=await e.json();throw new Error(`Errore nella richiesta: ${e.status} - ${a.message||"Errore sconosciuto"}`)}return e}async function d(){const o=await fetch("http://localhost:8080/api/auth/has-users");if(!o.ok){const e=await o.json();throw new Error(`Errore nella richiesta: ${o.status} - ${e.message||"Errore sconosciuto"}`)}return await o.json()}async function u(o){return await fetch("http://localhost:8080/api/admin",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}})}async function w(o){const t=await fetch("http://localhost:8080/api/emails/newsletter/file",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({format:"txt"})});if(console.log(t),!t.ok)throw new Error(`Errore durante il download: ${t.statusText}`);const e=await t.blob(),a=URL.createObjectURL(e),n=t.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1]||"newsletter.txt",s=document.createElement("a");return s.href=a,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),console.log("File scaricato con successo"),t}export{i as a,h as b,u as c,w as d,l as e,c as g,p as s,d as v};
