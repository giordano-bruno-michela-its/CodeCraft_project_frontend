import"./modulepreload-polyfill.B5Qt9EMX.js";import{v as c,e as m,c as g}from"./api.D7kNI4Xz.js";function l(){const e=document.getElementById("usernameRegistrationForm").value,r=document.getElementById("surnameRegistrationForm").value,o=document.getElementById("emailRegistrationUserForm").value,t=document.getElementById("passwordRegistrationForm").value;return{name:e,username:r,email:o,password:t}}const s=await c();console.log("Stato auth:",s);if(s==!1)document.getElementById("registrationUserForm").addEventListener("submit",async r=>{r.preventDefault();const o=l();try{await m(o),window.location.href="../Pages/login.html"}catch(t){console.error("Errore durante la registrazione:",t)}});else if(s==!0){const e=sessionStorage.getItem("authToken");e?(await g(e)).status==200?document.getElementById("registrationUserForm").addEventListener("submit",async t=>{t.preventDefault();const a=l();console.log(a),console.log("dentro");try{await m(a);const n=document.getElementById("errorTextRegistrationUser");n&&(n.textContent="Registrazione effettuata con successo !"),setTimeout(()=>{window.location.href="../Pages/dashboard.html"},2e3)}catch(n){const i=document.getElementById("errorTextRegistrationUser");i&&(i.textContent="Errore durante la registrazione, riprovare"),console.error("Errore durante la registrazione:",n)}}):window.location.href="../Pages/dashboard.html":window.location.href="../Pages/login.html"}
