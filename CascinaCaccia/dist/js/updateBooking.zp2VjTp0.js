import"./modulepreload-polyfill.B5Qt9EMX.js";import{f as i,g as s,h as c,e as d}from"./utils.DWPHOh8N.js";function m(){const e=Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(t=>parseInt(t.value));console.log(e);const o=[{id:1,name:"STORIA DI CASCINA Carla e Bruno CACCIA",description:"Un racconto avvincente della storia della Cascina e del suo impegno contro le mafie"},{id:2,name:"BRUNO CACCIA",description:" Laboratorio sulla figura di Bruno Caccia sotto il profilo istituzionale e umano"},{id:3,name:"INTRODUZIONE AL TEMA MAFIA",description:"Attività introduttiva volta a definire, conoscere e far conoscere il fenomeno mafioso"},{id:4,name:"I BENI CONFISCATI",description:"Attività di approfondimento sui beni confiscati, delle leggi sulla confisca dei beni e delle novità legislative"},{id:5,name:"LE MAFIE IN PIEMONTE",description:" Attività di approfondimento sulla presenza delle mafie sul territorio piemontese"},{id:6,name:"SOSTENIBILITÀ AMBIENTALE",description:"Approfondimenti sui temi della sostenibilità ambientale e della disuguaglianza con riflessioni sui problemi e la ricerca delle possibili soluzioni."},{id:7,name:"LA MAFIA ATTRAVERSO IL CINEMA",description:"Riflessioni sui modelli mafiosi presentati dal cinema per comprendere il loro impatto sulla società e migliorare la comprensione critica (e su quanto siano rappresentativi della realtà oggettiva e del sentire comune)."},{id:8,name:"IL GIOCO NON È UN AZZARDO (6-14 anni)",description:"L'attività mira a esplorare le varie tipologie di gioco e le loro caratteristiche e a riflettere sulla correttezza dei giochi a cui si prende parte"},{id:9,name:"CHI NON GIOCA VINCE",description:"Considerazioni per sensibilizzare ai rischi e alla dipendenza del gioco d'azzardo e ai collegamenti tra mafia e gioco d'azzardo illegale"}].filter(t=>e.includes(t.id)).map(t=>({id:t.id,name:t.name,description:t.description}));return console.log(o),{startDate:document.getElementById("startDate").value,endDate:document.getElementById("endDate").value,name:document.getElementById("name").value,surname:document.getElementById("surname").value,email:document.getElementById("boking-form-email").value,association:document.getElementById("association").value,phoneNumber:document.getElementById("phoneNumber").value,participantsQuantity:parseInt(document.getElementById("nChildren").value),guidesQuantity:parseInt(document.getElementById("nAdults").value),additionalInfo:document.getElementById("additionalInfo").value,activityType:o}}function u(e){if(!e)return;const a=new Date(e.beginTime).toISOString().split("T")[0],o=new Date(e.endTime).toISOString().split("T")[0];i("startDate",a),i("endDate",o),i("name",e.name),i("surname",e.surname),i("boking-form-email",e.email),i("association",e.association),i("phoneNumber",e.phoneNumber),s("duration",e.bookingDuration.id),i("nChildren",e.participantsQuantity),i("nAdults",e.guidesQuantity),e.additionalInfo&&c("additionalInfo",e.additionalInfo),e.activityType?e.activityType.forEach(t=>{const n=document.querySelector(`input[name="activities"][value="${t.id}"]`);n?n.checked=!0:console.warn(`Checkbox non trovato per activity ID: ${t.id}`)}):console.warn("Nessuna attività trovata in reservationDetails.activityType.")}document.addEventListener("DOMContentLoaded",()=>{const e=JSON.parse(localStorage.getItem("reservationDetails")||"{}"),a=JSON.parse(sessionStorage.getItem("reservationData")||"{}");u(e);const o=document.getElementById("bookingForm");o.addEventListener("submit",async t=>{t.preventDefault();const n=m();console.log(n);const r={codeEmailRequest:{email:a.email,code:a.code},formBooking:n};console.log(r);try{if((await fetch("http://localhost:8080/api/formreq/updatefromcode",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)d("Prenotazione modificata con successo!","success"),o.reset(),setTimeout(()=>{},2500);else throw new Error("Errore durante l'aggiornamento della prenotazione")}catch(l){d("Problemi durante l'invio della richiesta, riprova tra poco!","error"),console.error(l)}}),localStorage.removeItem("reservationDetails")});
