import"./modulepreload-polyfill.B5Qt9EMX.js";import{v as l,e as i,c as m}from"./api.D_iSOBMK.js";function c(){const o=document.getElementById("usernameRegistrationForm").value,t=document.getElementById("surnameRegistrationForm").value,s=document.getElementById("emailRegistrationUserForm").value,e=document.getElementById("passwordRegistrationForm").value;return{name:o,username:t,email:s,password:e}}const r=await l();console.log("Stato auth:",r);if(r==!1)console.log("primo accesso super",r),document.getElementById("registrationUserForm").addEventListener("submit",async t=>{t.preventDefault();const s=c();console.log(s);try{const e=await i(s);console.log("Registrazione effettuata con successo:",e),window.location.href="../Pages/login.html"}catch(e){console.error("Errore durante la registrazione:",e)}});else if(r==!0){console.log("il super esiste, secondo accesso per creazione nuove utente");const o=sessionStorage.getItem("authToken");if(console.log(o),console.log("il super esiste,token esiste secondo accesso per creazione nuove utente"),o){const t=await m(o);console.log("Stato admin:",await t.text()),t.status==200?document.getElementById("registrationUserForm").addEventListener("submit",async e=>{e.preventDefault();const a=c();console.log(a);try{const n=await i(a);console.log("Registrazione effettuata con successo:",n),window.location.href="../Pages/dashboard.html"}catch(n){console.error("Errore durante la registrazione:",n)}}):window.location.href="../Pages/dashboard.html"}else window.location.href="../Pages/login.html"}
